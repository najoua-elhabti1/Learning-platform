<app-header></app-header>
<app-prof-menu></app-prof-menu>

<div class="container mx-auto my-8 px-4">
  <!-- Filter by Course Dropdown -->
  <div class="mb-6 flex justify-center items-center">
    <label for="course-filter" class="mr-4 text-gray-800 font-semibold text-lg">Filter by Course</label>
    <div class="relative">
      <select 
        id="course-filter" 
        class="block appearance-none px-8 py-2 pr-10 border border-gray-300 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-800 font-medium bg-white hover:border-gray-400 transition ease-in-out duration-150"
        [(ngModel)]="selectedCourse" 
        (change)="filterActivities()"
      >
        <option value="">Tous les cours </option>
        <option *ngFor="let course of courses" [value]="course">{{ course }}</option>
      </select>
      <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
        <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </div>
    </div>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200 shadow-md rounded-lg">
      <thead>
        <tr class="bg-gray-100 border-b border-gray-300">
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Eleve</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Chapitre</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Action</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th>
          <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Duree (seconds)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let activity of filteredActivities" class="border-t border-gray-200 hover:bg-gray-50">
          <td class="px-6 py-4 text-sm text-gray-700">{{ activity.studentId }}</td>
          <td class="px-6 py-4 text-sm text-gray-700">{{ activity.courseId }}</td>
          <td class="px-6 py-4 text-sm text-gray-700">{{ activity.actionType }}</td>
          <td class="px-6 py-4 text-sm text-gray-700">{{ activity.timestamp }}</td>
          <td class="px-6 py-4 text-sm text-gray-700">{{ activity.duration }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
